<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéØ Engagement Dashboard - Flores Victoria</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #667eea;
            --primary-dark: #764ba2;
            --secondary: #11998e;
            --secondary-light: #38ef7d;
            --danger: #eb3349;
            --warning: #f2994a;
            --success: #4ade80;
            --gold: #FFD700;
            --silver: #C0C0C0;
            --bronze: #CD7F32;
            --platinum: #E5E4E2;
            --dark: #1e1e1e;
            --light: #f9fafb;
            --shadow: 0 10px 30px rgba(0,0,0,0.1);
            --shadow-lg: 0 20px 60px rgba(0,0,0,0.15);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
        }

        /* Header */
        header {
            background: white;
            padding: 25px 30px;
            border-radius: 20px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .header-left h1 {
            color: var(--primary);
            font-size: 2em;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .header-left p {
            color: #666;
            margin-top: 5px;
        }

        .header-right {
            display: flex;
            gap: 12px;
        }

        .header-btn {
            padding: 10px 20px;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .header-btn.primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
        }

        .header-btn.secondary {
            background: #f3f4f6;
            color: #333;
        }

        .header-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* Tab Navigation */
        .tab-nav {
            background: white;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 25px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            box-shadow: var(--shadow);
        }

        .tab-btn {
            padding: 12px 25px;
            border: none;
            background: #f3f4f6;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #666;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .tab-btn:hover {
            background: #e5e7eb;
        }

        .tab-btn.active {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
        }

        /* Stats Cards Row */
        .stats-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3em;
            color: white;
        }

        .stat-icon.blue { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); }
        .stat-icon.green { background: linear-gradient(135deg, var(--secondary), var(--secondary-light)); }
        .stat-icon.orange { background: linear-gradient(135deg, var(--warning), #f2c94c); }
        .stat-icon.red { background: linear-gradient(135deg, var(--danger), #f45c43); }
        .stat-icon.gold { background: linear-gradient(135deg, var(--gold), #FFE55C); }
        .stat-icon.purple { background: linear-gradient(135deg, #9333ea, #c084fc); }

        .stat-change {
            font-size: 0.85em;
            font-weight: 600;
            padding: 4px 8px;
            border-radius: 5px;
        }

        .stat-change.positive {
            background: #d1fae5;
            color: #065f46;
        }

        .stat-change.negative {
            background: #fee2e2;
            color: #991b1b;
        }

        .stat-value {
            font-size: 2em;
            font-weight: 700;
            color: #333;
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
            margin-top: 5px;
        }

        /* Main Grid */
        .main-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin-bottom: 25px;
        }

        .card {
            background: white;
            border-radius: 20px;
            box-shadow: var(--shadow);
            overflow: hidden;
        }

        .card-header {
            padding: 20px 25px;
            border-bottom: 1px solid #f3f4f6;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-title {
            font-size: 1.2em;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-title i {
            color: var(--primary);
        }

        .card-body {
            padding: 20px 25px;
        }

        /* Loyalty Tiers Section */
        .tiers-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .tier-card {
            text-align: center;
            padding: 20px 15px;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }

        .tier-card.bronze {
            background: linear-gradient(135deg, #CD7F32, #8B4513);
            color: white;
        }

        .tier-card.silver {
            background: linear-gradient(135deg, #C0C0C0, #808080);
            color: white;
        }

        .tier-card.gold {
            background: linear-gradient(135deg, #FFD700, #DAA520);
            color: #333;
        }

        .tier-card.platinum {
            background: linear-gradient(135deg, #E5E4E2, #B0B0B0);
            color: #333;
        }

        .tier-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .tier-name {
            font-weight: 700;
            font-size: 1.1em;
            margin-bottom: 5px;
        }

        .tier-count {
            font-size: 1.8em;
            font-weight: 700;
        }

        .tier-label {
            font-size: 0.85em;
            opacity: 0.9;
        }

        /* Coupon Stats */
        .coupon-list {
            list-style: none;
        }

        .coupon-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-radius: 12px;
            background: #f9fafb;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .coupon-item:hover {
            background: #f3f4f6;
        }

        .coupon-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .coupon-badge {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
        }

        .coupon-badge.percentage { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); }
        .coupon-badge.fixed { background: linear-gradient(135deg, var(--secondary), var(--secondary-light)); }
        .coupon-badge.shipping { background: linear-gradient(135deg, var(--warning), #f2c94c); }

        .coupon-details h4 {
            color: #333;
            margin-bottom: 3px;
        }

        .coupon-details span {
            color: #666;
            font-size: 0.85em;
        }

        .coupon-stats {
            text-align: right;
        }

        .coupon-stats .value {
            font-size: 1.3em;
            font-weight: 700;
            color: var(--primary);
        }

        .coupon-stats .label {
            font-size: 0.8em;
            color: #666;
        }

        /* Reviews Section */
        .reviews-summary {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .rating-big {
            text-align: center;
            padding: 25px;
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border-radius: 15px;
        }

        .rating-big .number {
            font-size: 3.5em;
            font-weight: 700;
            color: #92400e;
        }

        .rating-big .stars {
            color: #f59e0b;
            font-size: 1.3em;
            margin: 10px 0;
        }

        .rating-big .count {
            color: #92400e;
            font-size: 0.9em;
        }

        .rating-bars {
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 8px;
        }

        .rating-bar {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .rating-bar .label {
            width: 20px;
            text-align: right;
            font-weight: 600;
            color: #666;
        }

        .rating-bar .star {
            color: #f59e0b;
        }

        .rating-bar .bar {
            flex: 1;
            height: 10px;
            background: #e5e7eb;
            border-radius: 5px;
            overflow: hidden;
        }

        .rating-bar .fill {
            height: 100%;
            background: linear-gradient(90deg, #f59e0b, #fbbf24);
            border-radius: 5px;
        }

        .rating-bar .count {
            width: 40px;
            font-size: 0.9em;
            color: #666;
        }

        /* Pending Reviews */
        .pending-reviews {
            list-style: none;
        }

        .pending-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #fef3c7;
            border-radius: 12px;
            margin-bottom: 10px;
            border-left: 4px solid #f59e0b;
        }

        .pending-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .pending-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: #f59e0b;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
        }

        .pending-details h4 {
            color: #333;
            margin-bottom: 3px;
        }

        .pending-details span {
            color: #666;
            font-size: 0.85em;
        }

        .pending-actions {
            display: flex;
            gap: 8px;
        }

        .pending-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85em;
            transition: all 0.3s ease;
        }

        .pending-btn.approve {
            background: var(--success);
            color: white;
        }

        .pending-btn.reject {
            background: #fee2e2;
            color: #991b1b;
        }

        .pending-btn:hover {
            transform: scale(1.05);
        }

        /* Notifications Timeline */
        .notifications-timeline {
            position: relative;
            padding-left: 25px;
        }

        .notifications-timeline::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #e5e7eb;
        }

        .notification-item {
            position: relative;
            padding: 15px;
            background: #f9fafb;
            border-radius: 12px;
            margin-bottom: 15px;
        }

        .notification-item::before {
            content: '';
            position: absolute;
            left: -21px;
            top: 20px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--primary);
            border: 3px solid white;
        }

        .notification-item.birthday::before { background: #ec4899; }
        .notification-item.holiday::before { background: #f59e0b; }
        .notification-item.cart::before { background: var(--danger); }

        .notification-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .notification-type {
            font-weight: 600;
            color: #333;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .notification-time {
            color: #666;
            font-size: 0.85em;
        }

        .notification-message {
            color: #666;
            font-size: 0.9em;
        }

        /* Chart Container */
        .chart-container {
            position: relative;
            height: 300px;
        }

        /* Activity Feed */
        .activity-feed {
            max-height: 400px;
            overflow-y: auto;
        }

        .activity-item {
            display: flex;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid #f3f4f6;
        }

        .activity-icon {
            width: 35px;
            height: 35px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.9em;
        }

        .activity-icon.coupon { background: var(--primary); }
        .activity-icon.loyalty { background: var(--gold); }
        .activity-icon.review { background: #f59e0b; }
        .activity-icon.notification { background: var(--secondary); }

        .activity-content {
            flex: 1;
        }

        .activity-content p {
            color: #333;
            font-size: 0.9em;
        }

        .activity-content span {
            color: #666;
            font-size: 0.8em;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .tiers-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .main-grid {
                grid-template-columns: 1fr;
            }

            .reviews-summary {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            header {
                flex-direction: column;
                text-align: center;
            }

            .tab-nav {
                justify-content: center;
            }

            .stats-row {
                grid-template-columns: repeat(2, 1fr);
            }

            .tiers-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Loading State */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: 8px;
        }

        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="header-left">
                <h1>
                    <i class="fas fa-heart"></i>
                    <span>Engagement Dashboard</span>
                </h1>
                <p>Cupones, Fidelizaci√≥n, Rese√±as y Notificaciones</p>
            </div>
            <div class="header-right">
                <a href="/dashboard.html" class="header-btn secondary">
                    <i class="fas fa-arrow-left"></i>
                    Dashboard Principal
                </a>
                <button class="header-btn primary" onclick="refreshData()">
                    <i class="fas fa-sync-alt"></i>
                    Actualizar
                </button>
            </div>
        </header>

        <!-- Tab Navigation -->
        <div class="tab-nav">
            <button class="tab-btn active" onclick="switchTab('overview')">
                <i class="fas fa-chart-pie"></i>
                Resumen
            </button>
            <button class="tab-btn" onclick="switchTab('coupons')">
                <i class="fas fa-ticket-alt"></i>
                Cupones
            </button>
            <button class="tab-btn" onclick="switchTab('loyalty')">
                <i class="fas fa-crown"></i>
                Fidelizaci√≥n
            </button>
            <button class="tab-btn" onclick="switchTab('reviews')">
                <i class="fas fa-star"></i>
                Rese√±as
            </button>
            <button class="tab-btn" onclick="switchTab('notifications')">
                <i class="fas fa-bell"></i>
                Notificaciones
            </button>
        </div>

        <!-- Overview Tab -->
        <div id="overview" class="tab-content active">
            <!-- Quick Stats -->
            <div class="stats-row">
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon blue">
                            <i class="fas fa-ticket-alt"></i>
                        </div>
                        <span class="stat-change positive">+12%</span>
                    </div>
                    <div class="stat-value" id="activeCoupons">24</div>
                    <div class="stat-label">Cupones Activos</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon gold">
                            <i class="fas fa-coins"></i>
                        </div>
                        <span class="stat-change positive">+28%</span>
                    </div>
                    <div class="stat-value" id="totalPoints">1.2M</div>
                    <div class="stat-label">Puntos Emitidos</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon orange">
                            <i class="fas fa-star"></i>
                        </div>
                        <span class="stat-change positive">+8%</span>
                    </div>
                    <div class="stat-value" id="avgRating">4.7</div>
                    <div class="stat-label">Rating Promedio</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon green">
                            <i class="fas fa-bell"></i>
                        </div>
                        <span class="stat-change positive">+15%</span>
                    </div>
                    <div class="stat-value" id="scheduledNotifs">156</div>
                    <div class="stat-label">Notif. Programadas</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon purple">
                            <i class="fas fa-users"></i>
                        </div>
                        <span class="stat-change positive">+23%</span>
                    </div>
                    <div class="stat-value" id="loyaltyMembers">847</div>
                    <div class="stat-label">Miembros Lealtad</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon red">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <span class="stat-change negative">-5%</span>
                    </div>
                    <div class="stat-value" id="abandonedCarts">23</div>
                    <div class="stat-label">Carritos Abandonados</div>
                </div>
            </div>

            <!-- Loyalty Tiers Overview -->
            <div class="card" style="margin-bottom: 25px;">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-crown"></i>
                        Distribuci√≥n de Clientes por Tier
                    </div>
                </div>
                <div class="card-body">
                    <div class="tiers-grid">
                        <div class="tier-card bronze">
                            <div class="tier-icon">ü•â</div>
                            <div class="tier-name">Bronce</div>
                            <div class="tier-count" id="bronzeCount">423</div>
                            <div class="tier-label">clientes</div>
                        </div>
                        <div class="tier-card silver">
                            <div class="tier-icon">ü•à</div>
                            <div class="tier-name">Plata</div>
                            <div class="tier-count" id="silverCount">284</div>
                            <div class="tier-label">clientes</div>
                        </div>
                        <div class="tier-card gold">
                            <div class="tier-icon">ü•á</div>
                            <div class="tier-name">Oro</div>
                            <div class="tier-count" id="goldCount">98</div>
                            <div class="tier-label">clientes</div>
                        </div>
                        <div class="tier-card platinum">
                            <div class="tier-icon">üíé</div>
                            <div class="tier-name">Platino</div>
                            <div class="tier-count" id="platinumCount">42</div>
                            <div class="tier-label">clientes</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Grid -->
            <div class="main-grid">
                <!-- Engagement Chart -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-chart-line"></i>
                            Tendencias de Engagement
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="engagementChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Activity Feed -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-stream"></i>
                            Actividad Reciente
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="activity-feed" id="activityFeed">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Coupons Tab -->
        <div id="coupons" class="tab-content">
            <div class="stats-row">
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon blue"><i class="fas fa-ticket-alt"></i></div>
                    </div>
                    <div class="stat-value">24</div>
                    <div class="stat-label">Cupones Activos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon green"><i class="fas fa-check-circle"></i></div>
                    </div>
                    <div class="stat-value">1,847</div>
                    <div class="stat-label">Canjes Totales</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon orange"><i class="fas fa-percentage"></i></div>
                    </div>
                    <div class="stat-value">34%</div>
                    <div class="stat-label">Tasa de Uso</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon purple"><i class="fas fa-dollar-sign"></i></div>
                    </div>
                    <div class="stat-value">$4.2M</div>
                    <div class="stat-label">Descuentos Otorgados</div>
                </div>
            </div>

            <div class="main-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-fire"></i>
                            Cupones M√°s Usados
                        </div>
                    </div>
                    <div class="card-body">
                        <ul class="coupon-list">
                            <li class="coupon-item">
                                <div class="coupon-info">
                                    <div class="coupon-badge percentage">15%</div>
                                    <div class="coupon-details">
                                        <h4>PRIMAVERA2025</h4>
                                        <span>Descuento de temporada</span>
                                    </div>
                                </div>
                                <div class="coupon-stats">
                                    <div class="value">487</div>
                                    <div class="label">usos</div>
                                </div>
                            </li>
                            <li class="coupon-item">
                                <div class="coupon-info">
                                    <div class="coupon-badge fixed">$5K</div>
                                    <div class="coupon-details">
                                        <h4>BIENVENIDO</h4>
                                        <span>Primera compra</span>
                                    </div>
                                </div>
                                <div class="coupon-stats">
                                    <div class="value">324</div>
                                    <div class="label">usos</div>
                                </div>
                            </li>
                            <li class="coupon-item">
                                <div class="coupon-info">
                                    <div class="coupon-badge shipping">üöö</div>
                                    <div class="coupon-details">
                                        <h4>ENVIOGRATIS</h4>
                                        <span>Env√≠o gratis sobre $25.000</span>
                                    </div>
                                </div>
                                <div class="coupon-stats">
                                    <div class="value">256</div>
                                    <div class="label">usos</div>
                                </div>
                            </li>
                            <li class="coupon-item">
                                <div class="coupon-info">
                                    <div class="coupon-badge percentage">20%</div>
                                    <div class="coupon-details">
                                        <h4>DIADELAMADRE</h4>
                                        <span>Especial festivo</span>
                                    </div>
                                </div>
                                <div class="coupon-stats">
                                    <div class="value">198</div>
                                    <div class="label">usos</div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-chart-pie"></i>
                            Uso por Tipo de Cup√≥n
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="couponTypeChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loyalty Tab -->
        <div id="loyalty" class="tab-content">
            <div class="stats-row">
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon gold"><i class="fas fa-crown"></i></div>
                    </div>
                    <div class="stat-value">847</div>
                    <div class="stat-label">Miembros Totales</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon blue"><i class="fas fa-coins"></i></div>
                    </div>
                    <div class="stat-value">1.2M</div>
                    <div class="stat-label">Puntos en Circulaci√≥n</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon green"><i class="fas fa-exchange-alt"></i></div>
                    </div>
                    <div class="stat-value">456K</div>
                    <div class="stat-label">Puntos Canjeados</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon purple"><i class="fas fa-chart-line"></i></div>
                    </div>
                    <div class="stat-value">$8.5M</div>
                    <div class="stat-label">Valor Generado</div>
                </div>
            </div>

            <div class="card" style="margin-bottom: 25px;">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-crown"></i>
                        Distribuci√≥n por Tier
                    </div>
                </div>
                <div class="card-body">
                    <div class="tiers-grid">
                        <div class="tier-card bronze">
                            <div class="tier-icon">ü•â</div>
                            <div class="tier-name">Bronce</div>
                            <div class="tier-count">423</div>
                            <div class="tier-label">1x puntos</div>
                        </div>
                        <div class="tier-card silver">
                            <div class="tier-icon">ü•à</div>
                            <div class="tier-name">Plata</div>
                            <div class="tier-count">284</div>
                            <div class="tier-label">1.25x + 5% desc</div>
                        </div>
                        <div class="tier-card gold">
                            <div class="tier-icon">ü•á</div>
                            <div class="tier-name">Oro</div>
                            <div class="tier-count">98</div>
                            <div class="tier-label">1.5x + 10% desc</div>
                        </div>
                        <div class="tier-card platinum">
                            <div class="tier-icon">üíé</div>
                            <div class="tier-name">Platino</div>
                            <div class="tier-count">42</div>
                            <div class="tier-label">2x + 15% + env√≠o</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="main-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-chart-area"></i>
                            Puntos Emitidos vs Canjeados
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="pointsChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-trophy"></i>
                            Top Clientes por Puntos
                        </div>
                    </div>
                    <div class="card-body">
                        <ul class="coupon-list">
                            <li class="coupon-item">
                                <div class="coupon-info">
                                    <div class="coupon-badge" style="background: linear-gradient(135deg, #E5E4E2, #B0B0B0);">üíé</div>
                                    <div class="coupon-details">
                                        <h4>Mar√≠a Gonz√°lez</h4>
                                        <span>Cliente desde 2023 ‚Ä¢ Platino</span>
                                    </div>
                                </div>
                                <div class="coupon-stats">
                                    <div class="value">45,230</div>
                                    <div class="label">puntos</div>
                                </div>
                            </li>
                            <li class="coupon-item">
                                <div class="coupon-info">
                                    <div class="coupon-badge" style="background: linear-gradient(135deg, #E5E4E2, #B0B0B0);">üíé</div>
                                    <div class="coupon-details">
                                        <h4>Carlos Rodr√≠guez</h4>
                                        <span>Cliente desde 2022 ‚Ä¢ Platino</span>
                                    </div>
                                </div>
                                <div class="coupon-stats">
                                    <div class="value">38,450</div>
                                    <div class="label">puntos</div>
                                </div>
                            </li>
                            <li class="coupon-item">
                                <div class="coupon-info">
                                    <div class="coupon-badge" style="background: linear-gradient(135deg, #FFD700, #DAA520); color: #333;">ü•á</div>
                                    <div class="coupon-details">
                                        <h4>Ana Mart√≠nez</h4>
                                        <span>Cliente desde 2024 ‚Ä¢ Oro</span>
                                    </div>
                                </div>
                                <div class="coupon-stats">
                                    <div class="value">28,900</div>
                                    <div class="label">puntos</div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Reviews Tab -->
        <div id="reviews" class="tab-content">
            <div class="stats-row">
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon orange"><i class="fas fa-star"></i></div>
                    </div>
                    <div class="stat-value">4.7</div>
                    <div class="stat-label">Rating Promedio</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon blue"><i class="fas fa-comment"></i></div>
                    </div>
                    <div class="stat-value">2,847</div>
                    <div class="stat-label">Rese√±as Totales</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon green"><i class="fas fa-camera"></i></div>
                    </div>
                    <div class="stat-value">892</div>
                    <div class="stat-label">Con Fotos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon red"><i class="fas fa-clock"></i></div>
                    </div>
                    <div class="stat-value">12</div>
                    <div class="stat-label">Pendientes Moderaci√≥n</div>
                </div>
            </div>

            <div class="main-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-star-half-alt"></i>
                            Distribuci√≥n de Ratings
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="reviews-summary">
                            <div class="rating-big">
                                <div class="number">4.7</div>
                                <div class="stars">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star-half-alt"></i>
                                </div>
                                <div class="count">2,847 rese√±as</div>
                            </div>
                            <div class="rating-bars">
                                <div class="rating-bar">
                                    <span class="label">5</span>
                                    <i class="fas fa-star star"></i>
                                    <div class="bar"><div class="fill" style="width: 72%;"></div></div>
                                    <span class="count">2,050</span>
                                </div>
                                <div class="rating-bar">
                                    <span class="label">4</span>
                                    <i class="fas fa-star star"></i>
                                    <div class="bar"><div class="fill" style="width: 18%;"></div></div>
                                    <span class="count">512</span>
                                </div>
                                <div class="rating-bar">
                                    <span class="label">3</span>
                                    <i class="fas fa-star star"></i>
                                    <div class="bar"><div class="fill" style="width: 6%;"></div></div>
                                    <span class="count">171</span>
                                </div>
                                <div class="rating-bar">
                                    <span class="label">2</span>
                                    <i class="fas fa-star star"></i>
                                    <div class="bar"><div class="fill" style="width: 3%;"></div></div>
                                    <span class="count">85</span>
                                </div>
                                <div class="rating-bar">
                                    <span class="label">1</span>
                                    <i class="fas fa-star star"></i>
                                    <div class="bar"><div class="fill" style="width: 1%;"></div></div>
                                    <span class="count">29</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-clock"></i>
                            Pendientes de Moderaci√≥n
                        </div>
                    </div>
                    <div class="card-body">
                        <ul class="pending-reviews">
                            <li class="pending-item">
                                <div class="pending-info">
                                    <div class="pending-avatar">MG</div>
                                    <div class="pending-details">
                                        <h4>Mar√≠a Garc√≠a</h4>
                                        <span>Ramo Primaveral ‚Ä¢ ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                                    </div>
                                </div>
                                <div class="pending-actions">
                                    <button class="pending-btn approve" onclick="approveReview('r1')">
                                        <i class="fas fa-check"></i> Aprobar
                                    </button>
                                    <button class="pending-btn reject" onclick="rejectReview('r1')">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </li>
                            <li class="pending-item">
                                <div class="pending-info">
                                    <div class="pending-avatar">JR</div>
                                    <div class="pending-details">
                                        <h4>Juan Rodr√≠guez</h4>
                                        <span>Arreglo Rom√°ntico ‚Ä¢ ‚≠ê‚≠ê‚≠ê‚≠ê</span>
                                    </div>
                                </div>
                                <div class="pending-actions">
                                    <button class="pending-btn approve" onclick="approveReview('r2')">
                                        <i class="fas fa-check"></i> Aprobar
                                    </button>
                                    <button class="pending-btn reject" onclick="rejectReview('r2')">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </li>
                            <li class="pending-item">
                                <div class="pending-info">
                                    <div class="pending-avatar">AS</div>
                                    <div class="pending-details">
                                        <h4>Ana Silva</h4>
                                        <span>Corona F√∫nebre ‚Ä¢ ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê ‚Ä¢ üì∑</span>
                                    </div>
                                </div>
                                <div class="pending-actions">
                                    <button class="pending-btn approve" onclick="approveReview('r3')">
                                        <i class="fas fa-check"></i> Aprobar
                                    </button>
                                    <button class="pending-btn reject" onclick="rejectReview('r3')">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notifications Tab -->
        <div id="notifications" class="tab-content">
            <div class="stats-row">
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon blue"><i class="fas fa-bell"></i></div>
                    </div>
                    <div class="stat-value">156</div>
                    <div class="stat-label">Programadas</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon green"><i class="fas fa-birthday-cake"></i></div>
                    </div>
                    <div class="stat-value">23</div>
                    <div class="stat-label">Cumplea√±os Esta Semana</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon orange"><i class="fas fa-calendar-alt"></i></div>
                    </div>
                    <div class="stat-value">8</div>
                    <div class="stat-label">D√≠as para D√≠a de la Madre</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon red"><i class="fas fa-shopping-cart"></i></div>
                    </div>
                    <div class="stat-value">23</div>
                    <div class="stat-label">Carritos Abandonados</div>
                </div>
            </div>

            <div class="main-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-clock"></i>
                            Pr√≥ximas Notificaciones
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="notifications-timeline">
                            <div class="notification-item birthday">
                                <div class="notification-header">
                                    <span class="notification-type">
                                        <i class="fas fa-birthday-cake"></i>
                                        Cumplea√±os
                                    </span>
                                    <span class="notification-time">Hoy, 9:00 AM</span>
                                </div>
                                <div class="notification-message">
                                    Recordatorio de cumplea√±os para Mar√≠a L√≥pez - Regalo sugerido disponible
                                </div>
                            </div>
                            <div class="notification-item cart">
                                <div class="notification-header">
                                    <span class="notification-type">
                                        <i class="fas fa-shopping-cart"></i>
                                        Carrito Abandonado
                                    </span>
                                    <span class="notification-time">Hoy, 2:00 PM</span>
                                </div>
                                <div class="notification-message">
                                    Segundo recordatorio con cup√≥n 10% para 5 carritos abandonados hace 24h
                                </div>
                            </div>
                            <div class="notification-item holiday">
                                <div class="notification-header">
                                    <span class="notification-type">
                                        <i class="fas fa-heart"></i>
                                        D√≠a de la Madre
                                    </span>
                                    <span class="notification-time">En 8 d√≠as</span>
                                </div>
                                <div class="notification-message">
                                    Campa√±a "No olvides a mam√°" - 847 clientes objetivo
                                </div>
                            </div>
                            <div class="notification-item birthday">
                                <div class="notification-header">
                                    <span class="notification-type">
                                        <i class="fas fa-birthday-cake"></i>
                                        Cumplea√±os
                                    </span>
                                    <span class="notification-time">Ma√±ana, 9:00 AM</span>
                                </div>
                                <div class="notification-message">
                                    4 cumplea√±os de clientes programados
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-chart-bar"></i>
                            Efectividad de Notificaciones
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="notificationsChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching
        function switchTab(tabId) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            // Remove active from all buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            // Show selected tab
            document.getElementById(tabId).classList.add('active');
            // Add active to clicked button
            event.target.closest('.tab-btn').classList.add('active');
        }

        // Activity feed data
        const activities = [
            { type: 'coupon', message: 'Cup√≥n PRIMAVERA2025 usado por Mar√≠a G.', time: 'Hace 2 min' },
            { type: 'loyalty', message: 'Carlos R. subi√≥ a tier Platino', time: 'Hace 5 min' },
            { type: 'review', message: 'Nueva rese√±a 5‚≠ê en Ramo Primaveral', time: 'Hace 8 min' },
            { type: 'notification', message: 'Recordatorio de cumplea√±os enviado', time: 'Hace 15 min' },
            { type: 'coupon', message: 'Cup√≥n BIENVENIDO generado para nuevo usuario', time: 'Hace 20 min' },
            { type: 'loyalty', message: 'Ana M. canje√≥ 5,000 puntos', time: 'Hace 25 min' },
            { type: 'review', message: 'Rese√±a aprobada por moderaci√≥n', time: 'Hace 30 min' },
            { type: 'notification', message: 'Carrito abandonado - email enviado', time: 'Hace 45 min' },
        ];

        function renderActivityFeed() {
            const feed = document.getElementById('activityFeed');
            feed.innerHTML = activities.map(a => `
                <div class="activity-item">
                    <div class="activity-icon ${a.type}">
                        <i class="fas fa-${a.type === 'coupon' ? 'ticket-alt' : a.type === 'loyalty' ? 'crown' : a.type === 'review' ? 'star' : 'bell'}"></i>
                    </div>
                    <div class="activity-content">
                        <p>${a.message}</p>
                        <span>${a.time}</span>
                    </div>
                </div>
            `).join('');
        }

        // Charts
        function initCharts() {
            // Engagement Trend Chart
            const engagementCtx = document.getElementById('engagementChart').getContext('2d');
            new Chart(engagementCtx, {
                type: 'line',
                data: {
                    labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun'],
                    datasets: [
                        {
                            label: 'Cupones Usados',
                            data: [120, 190, 160, 280, 320, 487],
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: 'Puntos Canjeados',
                            data: [80, 120, 140, 200, 280, 350],
                            borderColor: '#FFD700',
                            backgroundColor: 'rgba(255, 215, 0, 0.1)',
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: 'Rese√±as',
                            data: [45, 60, 75, 90, 110, 130],
                            borderColor: '#f59e0b',
                            backgroundColor: 'rgba(245, 158, 11, 0.1)',
                            fill: true,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            // Coupon Type Chart
            const couponCtx = document.getElementById('couponTypeChart').getContext('2d');
            new Chart(couponCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Porcentaje', 'Monto Fijo', 'Env√≠o Gratis', 'Primera Compra', 'Cumplea√±os'],
                    datasets: [{
                        data: [45, 25, 15, 10, 5],
                        backgroundColor: [
                            '#667eea',
                            '#11998e',
                            '#f2994a',
                            '#9333ea',
                            '#ec4899'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right'
                        }
                    }
                }
            });

            // Points Chart
            const pointsCtx = document.getElementById('pointsChart').getContext('2d');
            new Chart(pointsCtx, {
                type: 'bar',
                data: {
                    labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun'],
                    datasets: [
                        {
                            label: 'Puntos Emitidos',
                            data: [150000, 180000, 210000, 250000, 290000, 320000],
                            backgroundColor: '#667eea'
                        },
                        {
                            label: 'Puntos Canjeados',
                            data: [50000, 70000, 85000, 100000, 120000, 140000],
                            backgroundColor: '#11998e'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return (value / 1000) + 'K';
                                }
                            }
                        }
                    }
                }
            });

            // Notifications Effectiveness Chart
            const notifsCtx = document.getElementById('notificationsChart').getContext('2d');
            new Chart(notifsCtx, {
                type: 'bar',
                data: {
                    labels: ['Cumplea√±os', 'Carritos', 'Feriados', 'Pedidos Rep.'],
                    datasets: [
                        {
                            label: 'Enviadas',
                            data: [120, 89, 45, 67],
                            backgroundColor: '#667eea'
                        },
                        {
                            label: 'Conversiones',
                            data: [72, 34, 28, 42],
                            backgroundColor: '#11998e'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // Review actions
        function approveReview(id) {
            alert(`Rese√±a ${id} aprobada`);
            // In real app: API call to approve
        }

        function rejectReview(id) {
            if (confirm('¬øRechazar esta rese√±a?')) {
                alert(`Rese√±a ${id} rechazada`);
                // In real app: API call to reject
            }
        }

        // Refresh data
        function refreshData() {
            location.reload();
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            renderActivityFeed();
            initCharts();
        });
    </script>
</body>
</html>

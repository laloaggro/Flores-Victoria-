<svg xmlns="http://www.w3.org/2000/svg" width="1600" height="1100" viewBox="0 0 1600 1100">
  <style>
    .title { font: 700 28px Inter, Arial, sans-serif; }
    .subtitle { font: 600 18px Inter, Arial, sans-serif; fill: #111827; }
    .label { font: 600 14px Inter, Arial, sans-serif; fill: #111827; }
    .muted { font: 12px Inter, Arial, sans-serif; fill: #4b5563; }
    .legend { font: 12px Inter, Arial, sans-serif; fill: #374151; }
    .box-front { fill: #eef6ff; stroke: #2563eb; stroke-width: 1.8; rx: 10; }
    .box-gw { fill: #eefcf7; stroke: #059669; stroke-width: 1.8; rx: 10; }
    .box-svc { fill: #fff7ed; stroke: #c2410c; stroke-width: 1.8; rx: 10; }
    .box-data { fill: #f3f4f6; stroke: #374151; stroke-width: 1.8; rx: 10; }
    .box-obs { fill: #f5f3ff; stroke: #6d28d9; stroke-width: 1.8; rx: 10; }
    .boundary { fill: #f8fafc; stroke: #94a3b8; stroke-dasharray: 6 4; rx: 16; }
    .arrow { stroke: #4b5563; stroke-width: 2.2; marker-end: url(#arrow); }
    .arrow-dash { stroke: #6b7280; stroke-width: 2; stroke-dasharray: 6 6; marker-end: url(#arrow); }
  </style>
  <defs>
    <marker id="arrow" markerWidth="12" markerHeight="12" refX="10" refY="3.5" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,7 L11,3.5 z" fill="#4b5563" />
    </marker>
  </defs>

  <text x="800" y="42" text-anchor="middle" class="title">Arquitectura en Producción (v2)</text>
  <text x="800" y="68" text-anchor="middle" class="muted">Gateway central, microservicios, datos y observabilidad</text>

  <!-- Leyenda -->
  <rect x="40" y="80" width="300" height="140" class="boundary"/>
  <text x="55" y="105" class="legend">Leyenda:</text>
  <rect x="55" y="120" width="12" height="12" class="box-front"/><text x="75" y="130" class="legend">Frontend</text>
  <rect x="55" y="142" width="12" height="12" class="box-gw"/><text x="75" y="152" class="legend">API Gateway</text>
  <rect x="175" y="120" width="12" height="12" class="box-svc"/><text x="195" y="130" class="legend">Microservicio</text>
  <rect x="175" y="142" width="12" height="12" class="box-data"/><text x="195" y="152" class="legend">Datos/Dependencia</text>

  <!-- Boundary principal -->
  <rect x="20" y="240" width="1560" height="820" class="boundary"/>
  <text x="30" y="260" class="muted">Red Docker: app-network</text>

  <!-- Frontends -->
  <rect x="60" y="280" width="360" height="130" class="box-front"/>
  <text x="240" y="312" text-anchor="middle" class="subtitle">Frontend</text>
  <text x="240" y="335" text-anchor="middle" class="muted">http://localhost:5175</text>
  <text x="240" y="355" text-anchor="middle" class="muted">Contenido estático</text>

  <rect x="60" y="430" width="360" height="130" class="box-front"/>
  <text x="240" y="462" text-anchor="middle" class="subtitle">Admin Panel</text>
  <text x="240" y="485" text-anchor="middle" class="muted">http://localhost:3010</text>

  <!-- API Gateway -->
  <rect x="470" y="340" width="320" height="200" class="box-gw"/>
  <text x="630" y="372" text-anchor="middle" class="subtitle">API Gateway</text>
  <text x="630" y="395" text-anchor="middle" class="muted">http://localhost:3000</text>
  <text x="485" y="420" class="muted">• /api/auth/* → auth-service</text>
  <text x="485" y="440" class="muted">• /api/products/* → product-service</text>
  <text x="485" y="460" class="muted">• /api/users/* → user-service</text>
  <text x="485" y="480" class="muted">• /api/orders/* → order-service</text>

  <!-- Microservicios grid -->
  <rect x="830" y="280" width="730" height="440" class="boundary"/>
  <text x="845" y="300" class="muted">Microservicios</text>

  <!-- fila 1 -->
  <rect x="850" y="320" width="210" height="110" class="box-svc"/>
  <text x="955" y="350" text-anchor="middle" class="label">auth-service</text>
  <text x="955" y="370" text-anchor="middle" class="muted">3001</text>
  <text x="865" y="392" class="muted">/api/auth/login</text>
  <text x="865" y="410" class="muted">/api/auth/profile</text>

  <rect x="1080" y="320" width="210" height="110" class="box-svc"/>
  <text x="1185" y="350" text-anchor="middle" class="label">product-service</text>
  <text x="1185" y="370" text-anchor="middle" class="muted">3009</text>
  <text x="1095" y="392" class="muted">/health</text>

  <rect x="1310" y="320" width="210" height="110" class="box-svc"/>
  <text x="1415" y="350" text-anchor="middle" class="label">user-service</text>
  <text x="1415" y="370" text-anchor="middle" class="muted">3003</text>

  <!-- fila 2 -->
  <rect x="850" y="450" width="210" height="110" class="box-svc"/>
  <text x="955" y="480" text-anchor="middle" class="label">order-service</text>
  <text x="955" y="500" text-anchor="middle" class="muted">3004</text>

  <rect x="1080" y="450" width="210" height="110" class="box-svc"/>
  <text x="1185" y="480" text-anchor="middle" class="label">cart-service</text>
  <text x="1185" y="500" text-anchor="middle" class="muted">3005</text>

  <rect x="1310" y="450" width="210" height="110" class="box-svc"/>
  <text x="1415" y="480" text-anchor="middle" class="label">wishlist-service</text>
  <text x="1415" y="500" text-anchor="middle" class="muted">3006</text>

  <!-- fila 3 -->
  <rect x="965" y="580" width="210" height="110" class="box-svc"/>
  <text x="1070" y="610" text-anchor="middle" class="label">review-service</text>
  <text x="1070" y="630" text-anchor="middle" class="muted">3007</text>

  <rect x="1205" y="580" width="210" height="110" class="box-svc"/>
  <text x="1310" y="610" text-anchor="middle" class="label">contact-service</text>
  <text x="1310" y="630" text-anchor="middle" class="muted">3008</text>

  <!-- Datos y dependencias -->
  <rect x="60" y="630" width="1180" height="380" class="boundary"/>
  <text x="75" y="652" class="muted">Datos y dependencias</text>

  <rect x="90" y="670" width="230" height="120" class="box-data"/>
  <text x="205" y="702" text-anchor="middle" class="label">MongoDB</text>
  <text x="205" y="724" text-anchor="middle" class="muted">27017</text>
  <text x="205" y="744" text-anchor="middle" class="muted">products_db</text>

  <rect x="340" y="670" width="230" height="120" class="box-data"/>
  <text x="455" y="702" text-anchor="middle" class="label">PostgreSQL</text>
  <text x="455" y="724" text-anchor="middle" class="muted">5432</text>

  <rect x="590" y="670" width="230" height="120" class="box-data"/>
  <text x="705" y="702" text-anchor="middle" class="label">Redis</text>
  <text x="705" y="724" text-anchor="middle" class="muted">6379</text>

  <rect x="840" y="670" width="230" height="120" class="box-data"/>
  <text x="955" y="702" text-anchor="middle" class="label">RabbitMQ</text>
  <text x="955" y="724" text-anchor="middle" class="muted">5672 / 15672</text>

  <!-- Observabilidad -->
  <rect x="1110" y="670" width="230" height="120" class="box-obs"/>
  <text x="1225" y="702" text-anchor="middle" class="label">Jaeger</text>
  <text x="1225" y="724" text-anchor="middle" class="muted">16686</text>

  <rect x="1360" y="670" width="190" height="120" class="box-obs"/>
  <text x="1455" y="702" text-anchor="middle" class="label">MCP Server</text>
  <text x="1455" y="724" text-anchor="middle" class="muted">5050</text>

  <!-- Conexiones frontends -> gateway -->
  <line x1="420" y1="345" x2="470" y2="390" class="arrow"/>
  <line x1="420" y1="490" x2="470" y2="440" class="arrow"/>

  <!-- Conexiones gateway -> servicios -->
  <line x1="790" y1="410" x2="850" y2="375" class="arrow"/>
  <line x1="790" y1="430" x2="1080" y2="375" class="arrow"/>
  <line x1="790" y1="450" x2="1310" y2="375" class="arrow"/>
  <line x1="790" y1="470" x2="850" y2="505" class="arrow"/>
  <line x1="790" y1="490" x2="1080" y2="505" class="arrow"/>
  <line x1="790" y1="510" x2="1310" y2="505" class="arrow"/>
  <line x1="790" y1="530" x2="965" y2="635" class="arrow"/>
  <line x1="790" y1="550" x2="1205" y2="635" class="arrow"/>

  <!-- Conexiones servicios -> datos (representativas) -->
  <line x1="1185" y1="375" x2="320" y2="730" class="arrow"/>
  <line x1="1415" y1="375" x2="455" y2="730" class="arrow"/>
  <line x1="955" y1="505" x2="455" y2="730" class="arrow"/>
  <line x1="1185" y1="505" x2="705" y2="730" class="arrow"/>
  <line x1="1415" y1="505" x2="705" y2="730" class="arrow"/>

  <!-- Observabilidad (simplificada) -->
  <line x1="955" y1="430" x2="1225" y2="730" class="arrow-dash"/>
  <line x1="1185" y1="430" x2="1225" y2="730" class="arrow-dash"/>
  <line x1="1415" y1="430" x2="1225" y2="730" class="arrow-dash"/>

  <text x="800" y="1060" text-anchor="middle" class="muted">Nota: Conexiones y puertos simplificados para claridad. Las flechas indican dirección típica de solicitud.</text>
</svg>

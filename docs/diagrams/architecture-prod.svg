<svg xmlns="http://www.w3.org/2000/svg" width="1300" height="900" viewBox="0 0 1300 900">
  <style>
    .title { font: 700 26px sans-serif; }
    .subtitle { font: 600 18px sans-serif; fill: #333; }
    .box { fill: #f7fafc; stroke: #2b6cb0; stroke-width: 2; rx: 8; }
    .box-green { fill: #f0fff4; stroke: #2f855a; }
    .box-orange { fill: #fffaf0; stroke: #c05621; }
    .box-purple { fill: #faf5ff; stroke: #6b46c1; }
    .box-gray { fill: #edf2f7; stroke: #4a5568; }
    .label { font: 600 14px sans-serif; fill: #1a202c; }
    .muted { font: 12px sans-serif; fill: #4a5568; }
    .arrow { stroke: #4a5568; stroke-width: 2; marker-end: url(#arrow); }
  </style>
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#4a5568" />
    </marker>
  </defs>

  <text x="650" y="40" text-anchor="middle" class="title">Arquitectura en Producción (Stack Completo)</text>
  <text x="650" y="70" text-anchor="middle" class="muted">Gateway central, microservicios y dependencias</text>

  <!-- Clientes -->
  <rect x="50" y="110" width="340" height="110" class="box-green" />
  <text x="220" y="145" text-anchor="middle" class="subtitle">Frontend</text>
  <text x="220" y="170" text-anchor="middle" class="muted">http://localhost:5175</text>
  <text x="220" y="190" text-anchor="middle" class="muted">Contenido estático</text>

  <rect x="50" y="250" width="340" height="110" class="box-green" />
  <text x="220" y="285" text-anchor="middle" class="subtitle">Admin Panel</text>
  <text x="220" y="310" text-anchor="middle" class="muted">http://localhost:3010</text>

  <!-- API Gateway -->
  <rect x="430" y="180" width="300" height="160" class="box" />
  <text x="580" y="215" text-anchor="middle" class="subtitle">API Gateway</text>
  <text x="580" y="240" text-anchor="middle" class="muted">http://localhost:3000</text>
  <text x="580" y="262" text-anchor="middle" class="muted">Rutas: /api/auth, /api/products, /api/users, ...</text>

  <!-- Microservicios -->
  <rect x="800" y="110" width="430" height="320" class="box-orange" />
  <text x="1015" y="135" text-anchor="middle" class="subtitle">Microservicios</text>

  <!-- fila 1 -->
  <rect x="820" y="160" width="190" height="90" class="box-orange" />
  <text x="915" y="190" text-anchor="middle" class="label">auth-service</text>
  <text x="915" y="210" text-anchor="middle" class="muted">3001</text>

  <rect x="1040" y="160" width="190" height="90" class="box-orange" />
  <text x="1135" y="190" text-anchor="middle" class="label">product-service</text>
  <text x="1135" y="210" text-anchor="middle" class="muted">3009</text>

  <!-- fila 2 -->
  <rect x="820" y="270" width="190" height="90" class="box-orange" />
  <text x="915" y="300" text-anchor="middle" class="label">user-service</text>
  <text x="915" y="320" text-anchor="middle" class="muted">3003</text>

  <rect x="1040" y="270" width="190" height="90" class="box-orange" />
  <text x="1135" y="300" text-anchor="middle" class="label">order-service</text>
  <text x="1135" y="320" text-anchor="middle" class="muted">3004</text>

  <!-- fila 3 -->
  <rect x="820" y="380" width="190" height="90" class="box-orange" />
  <text x="915" y="410" text-anchor="middle" class="label">cart-service</text>
  <text x="915" y="430" text-anchor="middle" class="muted">3005</text>

  <rect x="1040" y="380" width="190" height="90" class="box-orange" />
  <text x="1135" y="410" text-anchor="middle" class="label">wishlist-service</text>
  <text x="1135" y="430" text-anchor="middle" class="muted">3006</text>

  <!-- fila 4 -->
  <rect x="820" y="490" width="190" height="90" class="box-orange" />
  <text x="915" y="520" text-anchor="middle" class="label">review-service</text>
  <text x="915" y="540" text-anchor="middle" class="muted">3007</text>

  <rect x="1040" y="490" width="190" height="90" class="box-orange" />
  <text x="1135" y="520" text-anchor="middle" class="label">contact-service</text>
  <text x="1135" y="540" text-anchor="middle" class="muted">3008</text>

  <!-- Dependencias / Datos -->
  <rect x="70" y="420" width="660" height="300" class="box-purple" />
  <text x="400" y="445" text-anchor="middle" class="subtitle">Dependencias y Datos</text>

  <rect x="110" y="470" width="200" height="90" class="box-gray" />
  <text x="210" y="500" text-anchor="middle" class="label">MongoDB</text>
  <text x="210" y="520" text-anchor="middle" class="muted">27017</text>
  <text x="210" y="540" text-anchor="middle" class="muted">products_db</text>

  <rect x="340" y="470" width="200" height="90" class="box-gray" />
  <text x="440" y="500" text-anchor="middle" class="label">PostgreSQL</text>
  <text x="440" y="520" text-anchor="middle" class="muted">5432</text>

  <rect x="110" y="580" width="200" height="90" class="box-gray" />
  <text x="210" y="610" text-anchor="middle" class="label">Redis</text>
  <text x="210" y="630" text-anchor="middle" class="muted">6379</text>

  <rect x="340" y="580" width="200" height="90" class="box-gray" />
  <text x="440" y="610" text-anchor="middle" class="label">RabbitMQ</text>
  <text x="440" y="630" text-anchor="middle" class="muted">5672 / 15672</text>

  <!-- Observabilidad -->
  <rect x="570" y="470" width="140" height="200" class="box-gray" />
  <text x="640" y="500" text-anchor="middle" class="label">Jaeger</text>
  <text x="640" y="520" text-anchor="middle" class="muted">16686</text>

  <rect x="740" y="630" width="190" height="90" class="box-gray" />
  <text x="835" y="660" text-anchor="middle" class="label">MCP Server</text>
  <text x="835" y="680" text-anchor="middle" class="muted">5050</text>

  <!-- Conexiones principales -->
  <!-- Clientes -> Gateway -->
  <line x1="390" y1="165" x2="430" y2="220" class="arrow" />
  <line x1="390" y1="305" x2="430" y2="260" class="arrow" />

  <!-- Gateway -> Microservicios -->
  <line x1="730" y1="220" x2="820" y2="205" class="arrow" />
  <line x1="730" y1="240" x2="1040" y2="205" class="arrow" />
  <line x1="730" y1="260" x2="820" y2="315" class="arrow" />
  <line x1="730" y1="280" x2="1040" y2="315" class="arrow" />
  <line x1="730" y1="300" x2="820" y2="425" class="arrow" />
  <line x1="730" y1="320" x2="1040" y2="425" class="arrow" />
  <line x1="730" y1="340" x2="820" y2="535" class="arrow" />
  <line x1="730" y1="360" x2="1040" y2="535" class="arrow" />

  <!-- Servicios -> Datos -->
  <line x1="1040" y1="205" x2="310" y2="515" class="arrow" /> <!-- product -> Mongo -->
  <line x1="820" y1="315" x2="540" y2="515" class="arrow" /> <!-- user -> Postgres -->
  <line x1="1040" y1="315" x2="540" y2="515" class="arrow" /> <!-- order -> Postgres -->
  <line x1="820" y1="425" x2="310" y2="625" class="arrow" /> <!-- cart -> Redis -->
  <line x1="1040" y1="425" x2="310" y2="625" class="arrow" /> <!-- wishlist -> Redis -->

  <!-- Observabilidad conexiones (simplificadas) -->
  <line x1="915" y1="250" x2="640" y2="520" class="arrow" />
  <line x1="1135" y1="250" x2="640" y2="520" class="arrow" />
  <line x1="915" y1="360" x2="640" y2="520" class="arrow" />
  <line x1="1135" y1="360" x2="640" y2="520" class="arrow" />
  <line x1="915" y1="470" x2="640" y2="520" class="arrow" />
  <line x1="1135" y1="470" x2="640" y2="520" class="arrow" />

  <text x="650" y="830" text-anchor="middle" class="muted">Nota: Conexiones simplificadas para claridad. Los puertos corresponden al mapeo local.</text>
</svg>

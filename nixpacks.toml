# Nixpacks configuration for Product Service at repository root
# This file is used when Railway Root Directory is NOT set

[phases.setup]
nixPkgs = ['nodejs']

[phases.install]
cmds = [
  'pwd',
  'ls -la',
  'ls -la microservices/ || echo "microservices directory does not exist"',
  'cd microservices/product-service && npm ci && mkdir -p node_modules/@flores-victoria && cp -r ../shared node_modules/@flores-victoria/'
]

[start]
cmd = 'cd microservices/product-service && node src/server.js'

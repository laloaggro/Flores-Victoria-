{
  "dashboard": {
    "id": null,
    "title": "Sistema de Monitoreo - Arreglos Victoria",
    "tags": ["microservicios", "monitoreo"],
    "timezone": "browser",
    "schemaVersion": 16,
    "version": 0,
    "refresh": "25s",
    "rows": [
      {
        "title": "Resumen del Sistema",
        "height": "250px",
        "panels": [
          {
            "id": 1,
            "title": "Estado de los Microservicios",
            "type": "stat",
            "span": 6,
            "targets": [
              {
                "expr": "up{job=~\".*-service\"}",
                "legendFormat": "{{job}}"
              }
            ],
            "options": {
              "orientation": "auto",
              "textMode": "auto",
              "colorMode": "background",
              "graphMode": "none",
              "justifyMode": "auto"
            }
          },
          {
            "id": 2,
            "title": "Estado de las Bases de Datos",
            "type": "stat",
            "span": 6,
            "targets": [
              {
                "expr": "up{job=~\"postgres|redis|mongodb\"}",
                "legendFormat": "{{job}}"
              }
            ],
            "options": {
              "orientation": "auto",
              "textMode": "auto",
              "colorMode": "background",
              "graphMode": "none",
              "justifyMode": "auto"
            }
          }
        ]
      },
      {
        "title": "Métricas de Rendimiento",
        "height": "300px",
        "panels": [
          {
            "id": 3,
            "title": "Uso de CPU por Microservicio",
            "type": "graph",
            "span": 6,
            "targets": [
              {
                "expr": "rate(process_cpu_seconds_total[5m])",
                "legendFormat": "{{job}}"
              }
            ],
            "xaxis": {
              "show": true
            },
            "yaxes": [
              {
                "format": "percentunit",
                "show": true
              },
              {
                "show": true
              }
            ]
          },
          {
            "id": 4,
            "title": "Uso de Memoria por Microservicio",
            "type": "graph",
            "span": 6,
            "targets": [
              {
                "expr": "process_resident_memory_bytes",
                "legendFormat": "{{job}}"
              }
            ],
            "xaxis": {
              "show": true
            },
            "yaxes": [
              {
                "format": "bytes",
                "show": true
              },
              {
                "show": true
              }
            ]
          }
        ]
      },
      {
        "title": "Métricas de Bases de Datos",
        "height": "300px",
        "panels": [
          {
            "id": 5,
            "title": "Conexiones a PostgreSQL",
            "type": "graph",
            "span": 4,
            "targets": [
              {
                "expr": "pg_stat_database_numbackends",
                "legendFormat": "{{datname}}"
              }
            ],
            "xaxis": {
              "show": true
            },
            "yaxes": [
              {
                "format": "short",
                "show": true
              },
              {
                "show": true
              }
            ]
          },
          {
            "id": 6,
            "title": "Operaciones en Redis",
            "type": "graph",
            "span": 4,
            "targets": [
              {
                "expr": "redis_commands_total",
                "legendFormat": "{{cmd}}"
              }
            ],
            "xaxis": {
              "show": true
            },
            "yaxes": [
              {
                "format": "short",
                "show": true
              },
              {
                "show": true
              }
            ]
          },
          {
            "id": 7,
            "title": "Documentos en MongoDB",
            "type": "graph",
            "span": 4,
            "targets": [
              {
                "expr": "mongodb_mongod_db_objects",
                "legendFormat": "{{database}}"
              }
            ],
            "xaxis": {
              "show": true
            },
            "yaxes": [
              {
                "format": "short",
                "show": true
              },
              {
                "show": true
              }
            ]
          }
        ]
      }
    ]
  },
  "overwrite": true
}
# Build v3.1 - Order Service Simplified (logger fix)
FROM node:18-alpine

WORKDIR /app

# Copiar package simplificado
COPY package-simple.json ./package.json
COPY package-lock.json* ./

# Instalar solo dependencias necesarias
RUN npm install --production

# Copiar código fuente
COPY . .

# Railway inyecta PORT dinámicamente (típicamente 8080)
# No declaramos EXPOSE fijo para evitar confusión con el proxy

# Comando de inicio
CMD ["node", "src/server.simple.js"]

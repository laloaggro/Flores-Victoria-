# Nixpacks configuration for Product Service
# Using npm ci with package-lock.json for reproducible builds

[phases.setup]
nixPkgs = ['nodejs']

[phases.install]
cmds = [
  'npm ci',
  'mkdir -p node_modules/@flores-victoria',
  'cp -r ../shared node_modules/@flores-victoria/ 2>/dev/null || echo "Shared folder not available, will be copied at runtime"'
]

[start]
cmd = 'node src/server.js'

!function(){"use strict";const e=[{id:"AML001",name:'Ramo "Pasión Eterna"',description:"Exuberante ramo de 12 rosas rojas premium",price:35e3,original_price:42e3,image:"/images/products/final/AML001.webp",category:"featured",rating:4.9,stock:15},{id:"AML002",name:'Bouquet "Romance Rosa"',description:"Delicado bouquet de rosas rosadas",price:28e3,original_price:35e3,image:"/images/products/final/AML002.webp",category:"featured",rating:4.8,stock:20},{id:"PLT001",name:"Ramo de Rosas Rojas Premium",description:"Clásico ramo de 12 rosas rojas con follaje fresco",price:45e3,original_price:55e3,image:"/images/products/final/PLT001.webp",category:"featured",rating:4.7,stock:12},{id:"VAR007",name:"Lirios Asiáticos Luxury",description:"Ramo de lirios asiáticos en tonos rosa, naranja y blanco",price:54e3,original_price:68e3,image:"/images/products/final/VAR007.webp",category:"featured",rating:5,stock:4},{id:"EXO001",name:"Orquídea Phalaenopsis Elegante",description:"Elegante orquídea en maceta, ideal para regalo corporativo",price:75e3,original_price:85e3,image:"/images/products/final/EXO001.webp",category:"featured",rating:4.8,stock:7},{id:"AML003",name:"Arreglo Aniversario de Amor",description:"Romántico arreglo con rosas rojas, lirios y detalles dorados",price:65e3,original_price:78e3,image:"/images/products/final/AML003.webp",category:"featured",rating:4.9,stock:10},{id:"VAR001",name:"Ramo Primaveral Multicolor",description:"Explosión de colores con tulipanes, ranúnculos y fresias",price:48e3,original_price:58e3,image:"/images/products/final/VAR001.webp",category:"featured",rating:4.8,stock:14},{id:"PLT003",name:"Girasoles Radiantes",description:"Arreglo de 8 girasoles con detalles verdes y flores de campo",price:38e3,original_price:46e3,image:"/images/products/final/PLT003.webp",category:"featured",rating:4.6,stock:6},{id:"AML004",name:"Centro de Mesa Rústico Premium",description:"Arreglo bajo con rosas, hortensias, eucalipto y detalles de madera",price:62e3,original_price:75e3,image:"/images/products/final/AML004.webp",category:"featured",rating:4.9,stock:8},{id:"AML005",name:"Arreglo Aniversario Gold",description:"Lujoso arreglo con rosas rojas, ranúnculos dorados y lirios",price:88e3,original_price:105e3,image:"/images/products/final/AML005.webp",category:"featured",rating:5,stock:5},{id:"BBY001",name:"Bouquet Baby Shower Azul",description:"Tierno arreglo con flores en tonos azules y blancos",price:52e3,original_price:65e3,image:"/images/products/final/BBY001.webp",category:"featured",rating:4.7,stock:12},{id:"BDY001",name:"Arreglo de Cumpleaños Festivo",description:"Alegre arreglo con flores coloridas y globo de cumpleaños",price:48e3,original_price:58e3,image:"/images/products/final/BDY001.webp",category:"featured",rating:4.8,stock:15},{id:"CRP001",name:"Arreglo Floral Corporativo",description:"Arreglo elegante diseñado para oficinas y eventos de empresa",price:68e3,original_price:82e3,image:"/images/products/final/CRP001.webp",category:"featured",rating:4.6,stock:10},{id:"EXO002",name:"Arreglo Tropical Paradise",description:"Exóticas aves del paraíso, anturios rojos y heliconias",price:78e3,original_price:92e3,image:"/images/products/final/EXO002.webp",category:"featured",rating:4.9,stock:6},{id:"VAR005",name:"Bouquet Primaveral Multicolor",description:"Explosión de colores con tulipanes, ranúnculos y fresias",price:48e3,original_price:58e3,image:"/images/products/final/VAR005.webp",category:"featured",rating:4.8,stock:18},{id:"PLT002",name:"Tulipanes de Primavera",description:"Colorido arreglo de 10 tulipanes mixtos importados de Holanda",price:35e3,original_price:42e3,image:"/images/products/final/PLT002.webp",category:"featured",rating:4.7,stock:20},{id:"VAR006",name:"Cesta de Girasoles Radiantes",description:"Alegre cesta con 10 girasoles grandes y margaritas amarillas",price:44e3,original_price:52e3,image:"/images/products/final/VAR006.webp",category:"featured",rating:4.9,stock:14},{id:"CRP002",name:"Arreglo Corporativo Executive",description:"Sofisticado arreglo en tonos blancos y verdes con orquídeas",price:82e3,original_price:98e3,image:"/images/products/final/CRP002.webp",category:"featured",rating:4.8,stock:7},{id:"VAR008",name:"Ramo de Peonías Romántico",description:"Lujoso ramo con peonías rosas y blancas, elegancia francesa",price:95e3,original_price:115e3,image:"/images/products/final/VAR008.webp",category:"featured",rating:5,stock:4},{id:"BDY002",name:"Arreglo de Cumpleaños Fiesta",description:"Colorido arreglo con gerberas, alstroemerias y globo metalizado",price:51e3,original_price:62e3,image:"/images/products/final/BDY002.webp",category:"featured",rating:4.7,stock:16}];class t extends HTMLElement{constructor(){super(),this.config={title:this.getAttribute("title")||"Productos Destacados",category:this.getAttribute("category")||"featured",limit:parseInt(this.getAttribute("limit"))||8,autoPlay:"true"===this.getAttribute("auto-play"),interval:parseInt(this.getAttribute("interval"))||5e3},this.state={products:[],currentIndex:0,isPlaying:this.config.autoPlay,isDragging:!1,startX:0,scrollLeft:0},this.refs={container:null,track:null,prevBtn:null,nextBtn:null,dots:null},this.autoPlayInterval=null}connectedCallback(){this.loadProducts(),this.render(),this.attachEventListeners(),this.config.autoPlay&&this.startAutoPlay(),this.trackView()}disconnectedCallback(){this.stopAutoPlay(),this.detachEventListeners()}loadProducts(){this.state.products=e.filter(e=>e.category===this.config.category).slice(0,this.config.limit),this.state.products.length<this.config.limit&&(this.state.products=e.slice(0,this.config.limit))}render(){const{title:e}=this.config,{products:t}=this.state;this.innerHTML=`\n <section class="products-carousel" data-component="products-carousel">\n <div class="container">\n <div class="carousel-header">\n <h2 class="carousel-title">${this.escapeHtml(e)}</h2>\n <div class="carousel-controls">\n <button class="carousel-btn carousel-btn-prev" aria-label="Producto anterior">\n <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">\n <path d="M15 18l-6-6 6-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n </svg>\n </button>\n <button class="carousel-btn carousel-btn-next" aria-label="Producto siguiente">\n <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">\n <path d="M9 18l6-6-6-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n </svg>\n </button>\n </div>\n </div>\n\n <div class="carousel-container" role="region" aria-label="${this.escapeHtml(e)}">\n <div class="carousel-track">\n ${t.map(e=>this.renderProduct(e)).join("")}\n </div>\n </div>\n\n ${t.length>4?this.renderDots():""}\n </div>\n </section>\n `,this.refs.container=this.querySelector(".carousel-container"),this.refs.track=this.querySelector(".carousel-track"),this.refs.prevBtn=this.querySelector(".carousel-btn-prev"),this.refs.nextBtn=this.querySelector(".carousel-btn-next"),this.refs.dots=this.querySelector(".carousel-dots"),this.injectStyles()}renderProduct(e){const t=e.original_price?Math.round((e.original_price-e.price)/e.original_price*100):0;return`\n <article class="product-card" data-product-id="${e.id}">\n ${t>0?`<span class="product-badge">-${t}%</span>`:""}\n \n <div class="product-image">\n <img \n src="${e.image}" \n alt="${this.escapeHtml(e.name)}"\n loading="lazy"\n onerror="this.src='/images/placeholder-product.jpg'"\n />\n </div>\n\n <div class="product-info">\n <h3 class="product-name">${this.escapeHtml(e.name)}</h3>\n <p class="product-description">${this.escapeHtml(e.description)}</p>\n \n <div class="product-rating" aria-label="Calificación: ${e.rating} de 5 estrellas">\n ${this.renderStars(e.rating)}\n <span class="rating-value">${e.rating}</span>\n </div>\n\n <div class="product-footer">\n <div class="product-price">\n ${e.original_price?`\n <span class="price-original">$${this.formatPrice(e.original_price)}</span>\n `:""}\n <span class="price-current">$${this.formatPrice(e.price)}</span>\n </div>\n\n <button \n class="btn-add-to-cart" \n data-product-id="${e.id}"\n aria-label="Agregar ${this.escapeHtml(e.name)} al carrito"\n >\n <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">\n <path d="M9 2l-7 20 20-7-3-3-10 7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n <path d="M19 3l-3 3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n </svg>\n Agregar\n </button>\n </div>\n </div>\n\n ${e.stock<5&&e.stock>0?`\n <div class="stock-warning">¡Solo ${e.stock} disponibles!</div>\n `:""}\n </article>\n `}renderStars(e){const t=Math.floor(e),r=e%1>=.5,a=5-t-(r?1:0);let i="";for(let e=0;e<t;e++)i+='<span class="star star-full">★</span>';r&&(i+='<span class="star star-half">★</span>');for(let e=0;e<a;e++)i+='<span class="star star-empty">☆</span>';return i}renderDots(){const{products:e}=this.state,t=Math.ceil(e.length/4);return`\n <div class="carousel-dots" role="tablist" aria-label="Navegación del carrusel">\n ${Array.from({length:t},(t,r)=>`\n <button \n class="carousel-dot ${0===r?"active":""}" \n role="tab"\n aria-selected="${0===r}"\n aria-label="Ver productos ${4*r+1} a ${Math.min(4*(r+1),e.length)}"\n data-index="${r}"\n ></button>\n `).join("")}\n </div>\n `}attachEventListeners(){this.refs.prevBtn&&this.refs.prevBtn.addEventListener("click",()=>this.navigate("prev")),this.refs.nextBtn&&this.refs.nextBtn.addEventListener("click",()=>this.navigate("next")),this.refs.dots&&this.refs.dots.querySelectorAll(".carousel-dot").forEach(e=>{e.addEventListener("click",e=>{const t=parseInt(e.target.dataset.index);this.goToSlide(t)})}),this.refs.container&&(this.refs.container.addEventListener("mousedown",e=>this.handleDragStart(e)),this.refs.container.addEventListener("touchstart",e=>this.handleDragStart(e)),this.refs.container.addEventListener("mousemove",e=>this.handleDragMove(e)),this.refs.container.addEventListener("touchmove",e=>this.handleDragMove(e)),this.refs.container.addEventListener("mouseup",()=>this.handleDragEnd()),this.refs.container.addEventListener("touchend",()=>this.handleDragEnd()),this.refs.container.addEventListener("mouseleave",()=>this.handleDragEnd()),this.config.autoPlay&&(this.refs.container.addEventListener("mouseenter",()=>this.pauseAutoPlay()),this.refs.container.addEventListener("mouseleave",()=>this.resumeAutoPlay()))),this.querySelectorAll(".btn-add-to-cart").forEach(e=>{e.addEventListener("click",e=>this.handleAddToCart(e))}),this.addEventListener("keydown",e=>this.handleKeyboard(e))}detachEventListeners(){}navigate(e){const t=this.getItemsPerView(),r=Math.ceil(this.state.products.length/t)-1;this.state.currentIndex="next"===e?Math.min(this.state.currentIndex+1,r):Math.max(this.state.currentIndex-1,0),this.updateCarousel(),this.trackNavigation(e)}goToSlide(e){this.state.currentIndex=e,this.updateCarousel()}updateCarousel(){const e=this.getItemsPerView(),t=this.state.currentIndex*(100/e);if(this.refs.track&&(this.refs.track.style.transform=`translateX(-${t}%)`),this.refs.dots){this.refs.dots.querySelectorAll(".carousel-dot").forEach((e,t)=>{t===this.state.currentIndex?(e.classList.add("active"),e.setAttribute("aria-selected","true")):(e.classList.remove("active"),e.setAttribute("aria-selected","false"))})}if(this.refs.prevBtn&&(this.refs.prevBtn.disabled=0===this.state.currentIndex),this.refs.nextBtn){const t=Math.ceil(this.state.products.length/e)-1;this.refs.nextBtn.disabled=this.state.currentIndex>=t}}getItemsPerView(){const e=window.innerWidth;return e>=1200?4:e>=768?3:e>=480?2:1}handleDragStart(e){this.state.isDragging=!0,this.state.startX=e.type.includes("mouse")?e.pageX:e.touches[0].pageX,this.state.scrollLeft=this.refs.container.scrollLeft,this.refs.container.style.cursor="grabbing",this.pauseAutoPlay()}handleDragMove(e){if(!this.state.isDragging)return;e.preventDefault();const t=2*((e.type.includes("mouse")?e.pageX:e.touches[0].pageX)-this.state.startX);this.refs.container.scrollLeft=this.state.scrollLeft-t}handleDragEnd(){this.state.isDragging&&(this.state.isDragging=!1,this.refs.container.style.cursor="grab",this.resumeAutoPlay())}handleAddToCart(e){e.preventDefault();const t=e.currentTarget.dataset.productId,r=this.state.products.find(e=>e.id===t);r&&(window.FloresVictoriaComponents?.CartManager&&(window.FloresVictoriaComponents.CartManager.addItem({id:r.id,name:r.name,price:r.price,image:r.image,quantity:1}),window.FloresVictoriaComponents?.Toast&&window.FloresVictoriaComponents.Toast.show({message:`✅ ${r.name} agregado al carrito`,type:"success",duration:3e3})),this.trackAddToCart(r))}handleKeyboard(e){"ArrowLeft"===e.key?(e.preventDefault(),this.navigate("prev")):"ArrowRight"===e.key&&(e.preventDefault(),this.navigate("next"))}startAutoPlay(){this.config.autoPlay&&(this.autoPlayInterval=setInterval(()=>{const e=this.getItemsPerView(),t=Math.ceil(this.state.products.length/e)-1;this.state.currentIndex>=t?this.state.currentIndex=0:this.navigate("next")},this.config.interval))}stopAutoPlay(){this.autoPlayInterval&&(clearInterval(this.autoPlayInterval),this.autoPlayInterval=null)}pauseAutoPlay(){this.config.autoPlay&&this.state.isPlaying&&this.stopAutoPlay()}resumeAutoPlay(){this.config.autoPlay&&this.state.isPlaying&&this.startAutoPlay()}trackView(){window.FloresVictoriaComponents?.Analytics&&window.FloresVictoriaComponents.Analytics.track("carousel_view",{carousel_title:this.config.title,carousel_category:this.config.category,products_count:this.state.products.length})}trackNavigation(e){window.FloresVictoriaComponents?.Analytics&&window.FloresVictoriaComponents.Analytics.track("carousel_navigate",{carousel_title:this.config.title,direction:e,slide_index:this.state.currentIndex})}trackAddToCart(e){window.FloresVictoriaComponents?.Analytics&&window.FloresVictoriaComponents.Analytics.track("add_to_cart",{item_id:e.id,item_name:e.name,price:e.price,source:"carousel"})}escapeHtml(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}formatPrice(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}injectStyles(){Array.from(document.styleSheets).some(e=>{try{return e.href&&e.href.includes("products-carousel.css")}catch(e){return!1}})||console.warn('[ProductsCarousel] ⚠️ CSS externo no detectado. Asegúrate de incluir: <link rel="stylesheet" href="/css/components/products-carousel.css">')}}"customElements"in window?customElements.define("products-carousel",t):console.error("❌ customElements no soportado en este navegador"),window.FloresVictoriaComponents=window.FloresVictoriaComponents||{},window.FloresVictoriaComponents.ProductsCarousel=t}();
//# sourceMappingURL=products-carousel.min.js.map
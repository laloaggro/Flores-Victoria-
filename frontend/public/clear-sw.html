<!DOCTYPE html>
<html>
<head>
    <title>Limpiar Service Worker</title>
</head>
<body>
    <h1>Limpiando Service Worker...</h1>
    <pre id="log"></pre>
    <script>
        const log = document.getElementById('log');
        
        async function clearAll() {
            try {
                log.textContent += 'üîÑ Desregistrando Service Workers...\n';
                const registrations = await navigator.serviceWorker.getRegistrations();
                for (const reg of registrations) {
                    await reg.unregister();
                    log.textContent += `‚úÖ Desregistrado: ${reg.scope}\n`;
                }
                
                log.textContent += '\nüóëÔ∏è Limpiando caches...\n';
                const cacheNames = await caches.keys();
                for (const name of cacheNames) {
                    await caches.delete(name);
                    log.textContent += `‚úÖ Cache eliminado: ${name}\n`;
                }
                
                log.textContent += '\n‚úÖ Limpieza completa!\n';
                log.textContent += '\nüîÑ Redirigiendo a home en 2 segundos...\n';
                
                setTimeout(() => {
                    window.location.href = '/';
                }, 2000);
            } catch (error) {
                log.textContent += `\n‚ùå Error: ${error.message}\n`;
            }
        }
        
        clearAll();
    </script>
</body>
</html>
